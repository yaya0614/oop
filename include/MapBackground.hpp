#ifndef MAPBACKGROUND_HPP
#define MAPBACKGROUND_HPP

#include "MGameObject.hpp"
#include <Util/GameObject.hpp>
#include <glm/fwd.hpp>
#include <string>
#include <vector>

class MapBackground : public MGameObject {
public:
  explicit MapBackground(int level_id = 0); // 修改构造函数，接受 level_id
  void SetImage(const std::string &ImagePath);

  struct Platform {
    float x1, x2, y_low, y_high;
  };

  struct Level {
    std::vector<Platform> platforms;
  };

  struct Boundry {
    float min_x = -420.0f;
    float max_x = 420.0f;
    float min_y = -320.0f;
    float max_y = 320.0f;
  };

  Boundry GetBoundry() const;
  Level GetLevelData(int level_num);
  int GetLevelSize(int level_num);

private:
  std::string m_ImagePath;
  std::vector<std::string> tag;
  int level_id;
  std::vector<Level> levels{

      {
          {{{-380, -21, -300, -286}, // 底部平台1
            {-20, 65, -300, -292},   // 底部冰河
            {66, 110, -295, -286},   // 底部平台2
            {112, 192, -300, -292},  // 底部冰河
            {193, 380, -300, -286},  // 底部冰河

            {-380, 380, 270, 280},   // 上方平台（增加厚度）
            {-380, -380, -300, 300}, // 左牆（防掉出左邊）
            {380, 380, -300, 300},   // 右牆（防掉出右邊）
            {-380, -135, -223, -204}, {320, 380, -285, -225},
            {-11, 280, -184, -165},   {-49, -10, -165, -120},
            {-380, -51, -140, -120},  {-295, 95, -35, -19},
            {34, 380, -58, -40},

            {196, 298, 25, 67},       {198, 196, 64, 108},
            {12, 177, 45, 108},       {-278, 11, 45, 66},
            {-380, -279, 45, 147},    {-192, -110, 168, 209},
            {-380, -279, 45, 147},    {-192, -110, 168, 209},
            {-151, -51, 118, 169},    {-51, 380, 155, 169},
            {324, 380, -122, -59}

          }

          },
      },
      {
          {{
              // 底部平台
              {-370, -229, -288, -270},
              {-91, -2, -288, -270},
              {142, 370, -288, -270},

              {-370, 370, 270, 270},

              // 上方平台（增加厚度）
              {-370, -370, -270, 270}, // 左牆（防掉出左邊）
              {370, 370, -270, 270},   // 右牆（防掉出右邊）
                                       // 冰火海範圍
              {-232, -88, -225, -216},
              {-228, -92, -288, -276},
              {-1, 143, -288, -276},
              {0, 141, -225, -216},
              {245, 305, -288, -228},
              {294, 328, -288, -209},

              {328, 370, -209, -170},
              {-311, 270, -131, -109},
              {-370, -311, -110, -52},
              {-267, -229, -30, -11}, // 第一個斜波

              {-65, 92, -29, -11}, // 沼澤範圍

              {-228, 69, -29, -11},
              {93, 271, -29, -11},

              {-49, 68, -29, 11},
              // {137, 174, 31, 49},
              {275, 313, -32, 49},
              {313, 370, 49, 110},
              {212, 251, 150, 171},
              {73, 209, 171, 191},
              {-370, -49, 171, 191},

          }

          },
      },
      {{
          {-380, -236, -295, -286}, // 底部平台1
          {-235, -93, -295, -292},  // 底部火河
          {236, 380, -295, -286},   // 底部平台1
          {93, 235, -295, -292},    // 底部冰河

          {-380, 380, 270, 280},   // 上方平台（增加厚度）
          {-380, -380, -300, 300}, // 左牆（防掉出左邊）
          {380, 380, -300, 300},    {-90, 94, -286, -230},

          {-203, -174, -203, -184}, // 左邊第一個平台
          {-297, -203, -203, -190}, // 左邊第一個冰河
          {-380, -298, -203, -184}, // 左邊第一個平台
          {-380, -318, -184, -124}, // 左邊第一個高平台

          {172, 207, -203, -184}, // 右邊第一個方平台
          {208, 303, -203, -190}, // 右邊第一個方平台
          {303, 380, -203, -184}, // 右邊第一個方平台
          {320, 380, -185, -124}, // 右邊第一個高平台

          {-255, 241, -101, -82}, // 中間第一個
          {-200, -183, -78, 167}, // 左邊第一個高築
          {165, 181, -78, 167},   // 右邊第一個高築
          {-380, -305, -16, -27},   {312, 380, -16, -30},
          {-256, -198, 20, 35},     {-380, -323, 80, 98},
          {-267, -201, 138, 152},   {-232, -97, 169, 187},
          {-45, 15, 38, 105},       {-20, -6, -78, 36},
          {-155, -117, 66, 83},     {85, 123, 66, 84},
          {182, 253, 14, 31},       {328, 380, 76, 93},
          {184, 253, 136, 152},     {328, 380, 76, 93},
          {80, 208, 170, 188},      {-182, -91, -6, 5},
          {75, 165, -6, 5},
      }},
      {{
          {-370, 370, -288, -270}, // 底部平台
          {-370, 370, 270, 270},   // 上方平台（增加厚度）
          {-370, -370, -270, 270}, // 左牆（防掉出左邊）
          {370, 370, -270, 270},   // 右牆（防掉出右邊）
          {-186, -106, -170, -155}, {-186, -106, -45, -31},
          {-186, -104, 77, 92},     {-61, 48, 136, 154},
          {98, 177, -171, -155},    {98, 177, -44, -30},
          {98, 177, 75, 90},        {-254, -146, 158, 170},
          {132, 240, 158, 170},     {-360, -326, -181, -138},
          {-276, -209, -110, -91},  {-276, -209, -22, -6},
          {201, 266, -124, -107},   {201, 266, -28, -14},
          {-211, -187, -268, 158},  {176, 199, -268, 158},
          {-8, 3, -271, -236},      {-8, 3, -217, -110},
          {-8, 3, -88, 10},         {-8, 3, 28, 135},

      }}

  };
};
#endif // MAPBACKGROUND_HPP